{% extends 'base.html' %}

{% block title %}{{ categoria|capitalize }} - La Casa del Gadget{% endblock %}

{% block content %}
<div class="productos-page">
    <h1 style="margin-bottom:20px;">Productos</h1>
    <div style="display:flex;gap:30px;">
        <!-- Filtros -->
        <aside class="filtros-card" style="background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.08);padding:24px 18px;min-width:240px;">
            <h2 style="font-size:1.1rem;margin-bottom:18px;">Filtros</h2>
            <form method="GET" action="">
                <div style="margin-bottom:18px;">
                    <strong>Categoría</strong><br>
                    <label><input type="checkbox" name="categoria" value="telefonos" {% if categoria=='telefonos' %}checked{% endif %}> Teléfonos</label><br>
                    <label><input type="checkbox" name="categoria" value="tablets" {% if categoria=='tablets' %}checked{% endif %}> Tablets</label><br>
                    <label><input type="checkbox" name="categoria" value="laptops" {% if categoria=='laptops' %}checked{% endif %}> Laptops</label><br>
                    <label><input type="checkbox" name="categoria" value="wearables" {% if categoria=='wearables' %}checked{% endif %}> Wearables</label><br>
                    <label><input type="checkbox" name="categoria" value="accesorios" {% if categoria=='accesorios' %}checked{% endif %}> Accesorios</label>
                </div>
                <div style="margin-bottom:18px;">
                    <strong>Marca</strong><br>
                    <label><input type="checkbox" name="marca" value="Apple"> Apple</label><br>
                    <label><input type="checkbox" name="marca" value="Samsung"> Samsung</label><br>
                    <label><input type="checkbox" name="marca" value="Xiaomi"> Xiaomi</label><br>
                    <label><input type="checkbox" name="marca" value="Google"> Google</label>
                </div>
                <div style="margin-bottom:18px;">
                    <strong>Precio</strong><br>
                    <input type="range" name="precio" min="0" max="50000" value="50000" style="width:100%;">
                    <div style="display:flex;justify-content:space-between;font-size:0.9rem;">
                        <span>$0</span><span>$50,000</span>
                    </div>
                </div>
                <button type="submit" class="btn-submit" style="width:100%;">Filtrar</button>
            </form>
        </aside>
        <!-- Grid de productos -->
        <section style="flex:1;">
            <div style="margin-bottom:12px;color:#666;">{{ productos|length }} productos encontrados</div>
            <div class="products-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:28px;">
                {% for producto in productos %}
                    <div class="product-card" style="background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.08);padding:18px;">
                        <img src="{{ producto.url_imagen }}" alt="{{ producto.nombre }}" style="width:100%;height:180px;object-fit:cover;border-radius:10px;">
                        <div style="margin-top:10px;">
                            <span style="color:#888;font-size:0.95rem;">{{ producto.marca }}</span>
                            <h3 style="margin:5px 0 8px 0;font-size:1.1rem;">{{ producto.nombre }}</h3>
                            <p style="font-weight:bold;color:var(--verde);font-size:1.2rem;">${{ "{:,.0f}".format(producto.precio) }}</p>
                        </div>
                        <form method="POST" action="{{ url_for('main.agregar_carrito', producto_id=producto.id) }}">
                            <button type="submit" class="btn-submit" style="width:100%;margin-top:10px;">
                                <i class="fas fa-shopping-cart"></i> Agregar al carrito
                            </button>
                        </form>
                    </div>
                {% else %}
                    <div style="grid-column:1/-1;text-align:center;color:#888;">No hay productos en esta categoría.</div>
                {% endfor %}
            </div>
        </section>
    </div>
</div>
{% endblock %}