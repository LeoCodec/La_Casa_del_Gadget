{% extends 'base.html' %}

{% block title %}La Casa del Gadget{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="hero">
  <div class="hero-text">
    <h1>Nuevo en La Casa del Gadget</h1>
    <h2>Tecnología de Calidad a tu Alcance</h2>
    <p>Descubre los últimos gadgets de Apple, Samsung, Xiaomi y más. Prueba antes de comprar con nuestra exclusiva función de citas.</p>
    <div class="hero-buttons">
      <a class="btn btn-primary" href="#productos">Ver Productos</a>
      <a class="btn btn-secondary" href="{{ url_for('main.probar_producto') }}">Probar Producto</a>
    </div>
  </div>

  <div class="hero-image">
    <img
      src="https://images.unsplash.com/photo-1593640408182-31c70c8268f5?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
      alt="Banner Tecnología"
      class="img-fluid"
    >
  </div>
</section>

<!-- ============================================= -->
<!-- CATEGORÍAS (TARJETAS CLICABLES)               -->
<!-- ============================================= -->
 <section class="featured-products">
<h2 class="product-main">Explora por Categoría</h2>

<div class="category-cards">
  <div class="categories-grid">
    <!-- OJO: tu /productos usa checkboxes (getlist), así que para filtrar por categoría en link lo correcto es ?categoria= -->
    <a href="{{ url_for('main.productos_listado') }}?categoria=telefonos" class="category-card">
      <i class="fas fa-mobile-alt"></i> Teléfonos
    </a>

    <a href="{{ url_for('main.productos_listado') }}?categoria=tablets" class="category-card">
      <i class="fas fa-tablet-alt"></i> Tablets
    </a>

    <a href="{{ url_for('main.productos_listado') }}?categoria=laptops" class="category-card">
      <i class="fas fa-laptop"></i> Laptops
    </a>

    <a href="{{ url_for('main.productos_listado') }}?categoria=wearables" class="category-card">
      <i class="fas fa-clock"></i> Wearables
    </a>

    <a href="{{ url_for('main.productos_listado') }}?categoria=accesorios" class="category-card">
      <i class="fas fa-headphones"></i> Accesorios
    </a>
  </div>
</div>
</section>

<!-- ========================================= -->
<!-- PRODUCTOS DESTACADOS (DESDE LA BD)        -->
<!-- ========================================= -->
<section class="featured-products" id="productos">
  <div class="product-main">
    <h2>Productos Destacados</h2>
    <a class="view-all" href="{{ url_for('main.productos_listado') }}">
      Ver todos <i class="fas fa-arrow-right"></i>
    </a>
  </div>

  <div class="products-grid">
    {% if productos_destacados and productos_destacados|length > 0 %}
      {% for p in productos_destacados %}
      <div class="product-card">
        {% if loop.index <= 2 %}
          <span class="badge nuevo">Nuevo</span>
        {% endif %}

        <div class="pc-body">
          <div class="img-container">
            <img src="{{ p.url_imagen }}" alt="{{ p.nombre }}">
          </div>
          <h3>{{ p.nombre }}</h3>
          <p class="brand">{{ p.marca }}</p>
          <p class="price">${{ "{:,.0f}".format(p.precio) }}</p>
        </div>

        <div class="pc-actions">
          <form method="POST" action="{{ url_for('main.agregar_carrito', producto_id=p.id) }}">
            <button type="submit" class="btn btn-secondary">Agregar al carrito</button>
          </form>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <div style="padding:20px;color:#666;">
        No hay productos cargados aún. Corre el seed o agrega productos desde el panel.
      </div>
    {% endif %}
  </div>
</section>

<!-- Beneficios -->
<section class="benefits">
  <div class="benefit-item">
    <i class="fas fa-shipping-fast fa-2x" style="color:var(--coral); margin-bottom:10px;"></i>
    <h3>Envío Gratis</h3>
    <p>En compras mayores a $1,000</p>
  </div>
  <div class="benefit-item">
    <i class="fas fa-shield-alt fa-2x" style="color:var(--coral); margin-bottom:10px;"></i>
    <h3>Garantía Extendida</h3>
    <p>Hasta 2 años en productos seleccionados</p>
  </div>
  <div class="benefit-item">
    <i class="far fa-calendar-check fa-2x" style="color:var(--coral); margin-bottom:10px;"></i>
    <h3>Prueba Antes de Comprar</h3>
    <p>Agenda una cita y prueba hasta 3 productos</p>
  </div>
</section>

<!-- CTA -->
<div class="cta-test">
  <h2>¿No estás seguro? ¡Pruébalo primero!</h2>
  <p>Agenda una cita y prueba hasta 3 productos en nuestra tienda antes de tomar tu decisión.</p>
  <a href="{{ url_for('main.probar_producto') }}" class="btn btn-secondary">Agenda tu cita</a>
</div>

{% endblock %}
