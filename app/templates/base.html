<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}La Casa del Gadget{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="icon" href="{{ url_for('static', filename='img/logos/logo.ico') }}">
</head>
<body>
    <!-- Top Bar -->
    <header class="top-bar">
        Envío gratis en compras mayores a $1,000 MXN
    </header>

    <!-- Navbar principal -->
<nav class="navbar">
  <div class="logo">
    <a href="{{ url_for('main.index') }}">
      <img src="{{ url_for('static', filename='img/logos/logo_principal.png') }}"
           alt="La Casa del Gadget" style="height: 50px;">
    </a>
  </div>

  <!-- BUSCADOR FUNCIONAL -->
  <div class="search-container">
    <form class="search-bar" method="GET" action="{{ url_for('main.productos_listado') }}">
      <input
        type="text"
        name="q"
        placeholder="Buscar producto por nombre o marca..."
        value="{{ request.args.get('q', '') }}"
      >
      <button type="submit" aria-label="Buscar">
        <i class="fas fa-search"></i>
      </button>
    </form>
  </div>

  <ul class="nav-links">
    <!-- Botón Cita / Probar -->
    <li>
      <a href="{{ url_for('main.probar_producto') }}" class="btn-nav btn-primary">
        <i class="fas fa-laptop"></i> Cita
      </a>
    </li>

    <!-- STAFF: si está logeado -> nombre (va a punto_venta) + logout; si no -> botón staff -->
    {% if session.get('tipo_usuario') == 'staff' %}
      <li>
        <a href="{{ url_for('main.punto_venta') }}" class="btn-nav btn-secondary" title="Ir a Punto de Venta">
          <i class="fas fa-user"></i>
          {{ session.get('nombre_completo') or session.get('username') or 'Staff' }}
        </a>
      </li>

      <li>
        <a href="{{ url_for('main.logout') }}" class="icon-link logout-btn" title="Cerrar sesión">
          <i class="fas fa-sign-out-alt"></i>
        </a>
      </li>
    {% else %}
      <li>
        <a href="{{ url_for('main.empleados') }}" class="btn-nav btn-secondary">
          <i class="fas fa-user-tie"></i> Staff
        </a>
      </li>
    {% endif %}

    <!-- Carrito -->


    <!-- Login (si quieres ocultarlo cuando staff está logeado, dímelo) -->
<!-- Login (solo si NO hay staff logeado) -->
        {% if session.get('tipo_usuario') != 'staff' %}
            <li>
      <a class="icon-link" href="{{ url_for('main.carrito') }}" title="Carrito">
        <i class="fas fa-shopping-cart"></i>
        {% if cart_count and cart_count > 0 %}
          <span class="cart-count">{{ cart_count }}</span>
        {% endif %}
      </a>
    </li>
        <li>
        <a href="{{ url_for('main.login') }}" class="icon-link" title="Iniciar sesión">
            <i class="fas fa-user"></i>
        </a>
        </li>
        {% endif %}

  </ul>
</nav>


    <!-- Barra de Categorías (separada y debajo del navbar) -->
    <ul class="category-bar">
    <li>
    <a href="{{ url_for('main.productos_listado', categoria='telefonos') }}"
        style="text-decoration: none; color: inherit;">
        Teléfonos
    </a>
    </li>
    <li>
    <a href="{{ url_for('main.productos_listado', categoria='tablets') }}"
        style="text-decoration: none; color: inherit;">
        Tablets
    </a>
    </li>
    <li>
    <a href="{{ url_for('main.productos_listado', categoria='laptops') }}"
        style="text-decoration: none; color: inherit;">
        Laptops
    </a>
    </li>
    <li>
    <a href="{{ url_for('main.productos_listado', categoria='wearables') }}"
        style="text-decoration: none; color: inherit;">
        Wearables
    </a>
    </li>
    <li>
    <a href="{{ url_for('main.productos_listado', categoria='accesorios') }}"
        style="text-decoration: none; color: inherit;">
        Accesorios
    </a>
    </li>
    </ul>

    {% block content %}
    <!-- Aquí va el contenido específico de cada página -->
    {% endblock %}
    <footer class="footer">
        <div style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 20px;">
            <div class="footer-section" style="flex: 1; min-width: 250px;">
                <h3>La Casa del Gadget</h3>
                <p>Tu tienda de confianza para tecnología de calidad. Prueba antes de comprar.</p>
            </div>
            <div class="footer-section">
                <h4>Categorías</h4>
                <ul>
                    <li>Teléfonos</li>
                    <li>Tablets</li>
                    <li>Laptops</li>
                    <li>Wearables</li>
                    <li>Accesorios</li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Ayuda</h4>
                <ul>
                    <li><a href="{{ url_for('main.probar_producto') }}">Probar Producto</a></li>
                    <li>Envíos y Devoluciones</li>
                    <li>Garantías</li>
                    <li>Preguntas Frecuentes</li>
                    <li>Términos y Condiciones</li>
                    <li>Contacto</li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <p>Av. Principal 123, Ciudad de México</p>
                <p>+52 55 1234 5678</p>
                <p>contacto@lacasadelgadget.com</p>
            </div>
        </div>
        <div class="footer-bottom">
            © 2025 La Casa del Gadget. Todos los derechos reservados.
        </div>
    </footer>
</body>
</html>